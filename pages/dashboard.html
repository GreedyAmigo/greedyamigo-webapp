<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="apple-touch-icon" sizes="57x57" href="../img/favicon/apple-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="../img/favicon/apple-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="../img/favicon/apple-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="../img/favicon/apple-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="../img/favicon/apple-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="../img/favicon/apple-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="../img/favicon/apple-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="../img/favicon/apple-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="../img/favicon/apple-icon-180x180.png">
        <link rel="icon" type="image/png" sizes="192x192"  href="../img/favicon/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="../img/favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="../img/favicon/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="../img/favicon/favicon-16x16.png">
        <link rel="manifest" href="../img/favicon/manifest.json">
        <meta name="msapplication-TileColor" content="#ffffff">
        <meta name="msapplication-TileImage" content="../img/favicon/ms-icon-144x144.png">
        <meta name="theme-color" content="#ffffff">

        <link href="https://fonts.googleapis.com/css?family=Sarabun|Work+Sans" rel="stylesheet">
        <link href="../style.css" rel="stylesheet">
        <link href="../css/dashboard.css" rel="stylesheet">

        <title>Greedy Amigo</title>
    </head>
    <body>
        <div id="dashboard">
            <nav class="navbar" v-bind:class="{ blurr_item: lendingDialogue.addLendingDialogueVisible }">
                <div class="navbar_left">
                    <a href="dashboard.html">
                        <img class="nav_item nav_greedy_amigo_logo" src="../img/logo.svg" alt="greedy amigo logo"></object>
                    </a>
                    <a class="nav_item nav_greedy_amigo_text" href="dashboard.html">Greedy Amigo</a>
                </div>
                <div class="navbar_right">
                    <a class="nav_item nav_right_item" v-on:click="logOutUser" href="../index.html">
                        Log out
                    </a>
                </div>
            </nav>
    
            <main id="main_element" class="main" v-bind:class="{ blurr_item: lendingDialogue.addLendingDialogueVisible }">
                <h1>Hi {{ user.firstName }} {{ user.lastName }}</h1>
    
                <ul class="lending_section">
                    <li v-for="lending in user.lendings">
                        <div class="single_lending" v-bind:class="{ single_lending_cleared: lending.cleared }">
                            <div class="flexbox">
                                <p class="p_default_style lending_date_month" v-bind:class="{ single_lending_cleared: lending.cleared }">{{ lending.dueDate.month }}</p>
                                <p class="p_default_style lending_date_day" v-bind:class="{ single_lending_cleared: lending.cleared }">{{ lending.dueDate.day }}</p>
                            </div>
                            
                            <span v-if="lending.emoji" class="lending_emoji" >{{ lending.emoji }}</span>
                            <span v-else class="lending_emoji">ðŸ’µ</span>
        
                            <img v-if="lending.lent" class="lending_direction lending_lent" src="../img/lent.svg" alt="lent ressource">
                            <img v-else class="lending_direction lending_borrowed" src="../img/borrowed.svg" alt="borrowed ressource">

                            <div class="flexbox lending_text">
                                <p class="lending_description">
                                    {{ lending.description }}                       
                                </p>
                                <p class="lending_other">    
                                    <em>
                                        {{ lending.other.firstName }} {{ lending.other.lastName }}
                                    </em>
                                </p>
                            </div>
                            <div class="flexbox">
                                <em v-if="lending.discriminator === 'moneyLending'">
                                    {{ lending.amount }} {{ lending.currency.symbol }}
                                </em>
                                <em v-else>
                                    {{ lending.thing.label }}
                                </em>
                            </div>
                            <div class="flexbox">
                                <img class="lending_edit_icon" src="../img/edit.svg" alt="lent ressource">
                                <img class="lending_delete_icon" src="../img/delete.svg" alt="lent ressource">
                            </div>
                        </div>
                        <hr v-if="lending !== user.lendings[user.lendings.length - 1]" class="lending_seperator">
                    </li>
                </ul>

                <button class="btn_default_style add_lending_button" v-on:click="showAddLendingDialoge">
                    <img class="add_lending_icon" src="../img/add.svg" alt="add lending">
                </button>
            </main>

            <div v-if="lendingDialogue.addLendingDialogueVisible" class="lending_dialogue_background">
                <form class="lending_dialogue" v-on:submit.prevent="saveLending" >
                    <h2 class="popup_header">add new lending</h2>

                    <div class="lending_dialogue_values">
                        <input class="popup_lending_grid_item input_default_style popup_lending_description" placeholder="Description" required>

                        <label id="duedatepicker_label" class="popup_lending_grid_item popup_lending_duedate_label">Due date</label>
                        <datepicker class="popup_lending_grid_item popup_lending_duedate" v-model="newLending.dueDate" id="duedatepicker" name="duedatepicker"></datepicker>
    
                        <label id="create_new_friend_label" class="popup_lending_grid_item popup_lending_add_friend_label" for="create_new_friend_label">Add new friend</label>
                        <input id="create_new_friend" type="checkbox" class="popup_lending_grid_item popup_lending_add_friend_checkbox" v-on:click="lendingDialogue.addNewFriend = !lendingDialogue.addNewFriend">
    
                        <input v-if="lendingDialogue.addNewFriend" class="popup_lending_grid_item input_default_style popup_lending_firstname" placeholder="Firstname">
                        <input v-if="lendingDialogue.addNewFriend" class="popup_lending_grid_item input_default_style popup_lending_lastname" placeholder="Lastname">
                        <select v-else class="popup_lending_grid_item popup_friend_search">
                            <option v-for="friend in getFriends()" :value="friend">{{ friend }}</option>
                        </select>

                        <label id="lendingtype_label" class="popup_lending_grid_item popup_lending_type_label" for="lendingtype">Lending type</label>
                        <select class="popup_lending_grid_item popup_lending_type" v-model="newLending.discriminator">
                            <option v-for="lendingType in lendingTypes" :value="lendingType">{{ lendingType }}</option>
                        </select>

                        
                    </div>

                    <div class="btn_container">
                        <button class="btn_default_style popup_lending_button" v-on:click="hideAddLendingDialoge">Cancel</button>
                        <button type="submit" class="btn_default_style popup_lending_button">Save</button>
                    </div>
                </form>
            </div>
        </div>

        

        <script src="../dist/dashboard.bundle.js"></script>
        <script src="../dist/dashboard.bundle.js.map"></script>
    </body>
</html>